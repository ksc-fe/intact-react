(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e(require("react"),require("intact/dist")):typeof define==="function"&&define.amd?define(["react","intact/dist"],e):t.Intact=e(t.React,t.Intact)})(this,function(t,e){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;e=e&&e.hasOwnProperty("default")?e["default"]:e;var r=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}};var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}();var o=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e};var i=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t};var a=e.Vdt.miss.h;var p=e.Vdt.miss.Types;var s=e.Vdt.miss.VNode;var c=e.utils;var u=c.each;var f=c.isFunction;var l=c.isString;var h=c.isArray;var d=c.isObject;var v=c.hasOwn;var y=c.create;var m=c.extend;var $=c.isStringOrNumber;var b=typeof Symbol==="function"&&Symbol.for;var g=b?Symbol.for("react.element"):60103;var w=t.createElement;t.createElement=function t(e,r,n){var o=d(e.prototype)&&e.prototype.$$cid==="IntactReact";var i=e.propTypes;if(o){delete e.propTypes}var a=w.apply(this,arguments);if(o&&i){a.type.propTypes=i}return a};var _=function(t){o(e,t);function e(n){r(this,e);var o=i(this,t.call(this,n));o.$$ctor=e.Ctor;o.instance=new o.$$ctor(n);var a=["constructor","props","_create","_mount","_beforeUpdate","_update","_destory","defaults","template","setState","forceUpdate"];var p=o.instance;var s=Object.getOwnPropertyNames(p.__proto__);s=s.concat(Object.getOwnPropertyNames(p));for(var c=s,u=Array.isArray(c),l=0,c=u?c:c[Symbol.iterator]();;){var h;if(u){if(l>=c.length)break;h=c[l++]}else{l=c.next();if(l.done)break;h=l.value}var d=h;if(!a.includes(d)){if(f(p[d])){o[d]=p[d].bind(o)}else{o[d]=p[d]}}}return o}e.prototype._create=function t(){this.$$ctor.getDerivedStateFromProps&&this.$$ctor.getDerivedStateFromProps();this.componentWillMount&&this.componentWillMount()};e.prototype._mount=function t(){this.componentDidMount&&this.componentDidMount()};e.prototype._beforeUpdate=function t(){this.$$ctor.getDerivedStateFromProps&&this.$$ctor.getDerivedStateFromProps();this.componentWillReceiveProps&&this.componentWillReceiveProps();this.componentWillUpdate&&this.componentWillUpdate();this.shouldComponentUpdate&&this.shouldComponentUpdate()};e.prototype._update=function t(){this.getSnapshotBeforeUpdate&&this.getSnapshotBeforeUpdate();this.componentDidUpdate&&this.componentDidUpdate()};e.prototype._destory=function t(){this.componentWillUnmount&&this.componentWillUnmount()};e.prototype.defaults=function t(){return e.Ctor.props};e.prototype.template=function t(e,r,n,o){var i=this.data;var a=S(i.instance.render.apply(i)),p=a.children;if(p.length>1){throw new Error("children must return only one"+p)}var s=p;s.children=s.props.children;return s};e.prototype.setState=function t(e,r){this.state=e;this.set({state:e});f(r)&&r.apply(this)};e.prototype.forceUpdate=function t(e){this.update();f(e)&&e.apply(this)};return e}(e);function O(t){return f(t)&&t.prototype.render&&t.prototype.isReactComponent&&t.prototype.$$cid!=="IntactReact"}function U(t){return f(t)&&t.prototype.$$cid!=="IntactReact"}function S(t){if(!t){return{children:t,_blocks:{}}}if(!h(t)){t=[t]}var e=[];var r={};u(t,function(t){if(!t){return}var n=t;if($(t)){n=new s(p.Text,null,{},t)}else if(d(t)&&t.$$typeof===g){var o=k(m({},t.attributes,{key:t.key,ref:t.ref},t.props));var i=t.type;if(O(i)){_.Ctor=t.type;_.Ctor.props=o;i=_}else if(U(i)){i=function e(r){var n=t.type(r);var o=S(n),i=o.children;if(i.length>1){throw new Error("children must return only one"+i)}var a=i;a.children=a.props.children;return a}}n=a(i,o,o.children,null,t.key,t.ref)}if(d(n.props)&&n.props.slot){var c=n.props.slot===undefined||n.props.slot===true?"default":n.props.slot;delete n.props.slot;r[c]=function(t){n.children=n.props.children;return n}}else{e.push(n)}});if(e.length===1){e=e[0]}return{children:e,_blocks:r}}function D(t,e){if(f(t[e])&&/^evChanged?-?/.test(e)){return true}return false}function I(t,e){if(f(t[e])&&/^on[A-Z]/.test(e)){return true}return false}function k(t){var e=function e(r){if(v.call(t,r)){if(D(t,r)){var n="ev-"+r.replace(/^evChange(d?)-?(.*)$/,function(t,e,r){if(r){return"$change"+e+":"+r}return"$change"+e});t[n]=t[r];delete t[r]}if(I(t,r)){var o="ev-"+r.replace(/^on([A-Z].*)$/,"$1").toLowerCase();t[o]=t[r];delete t[r]}if(r==="ref"&&d(t[r])){t[r]=function(e){t[r].current=e}}if(r==="children"&&t["children"]){var i=S(t["children"]),a=i.children,p=i._blocks;t["children"]=a;t["_blocks"]=p}}};for(var r in t){e(r)}return t}var C=e.utils;var P=C.get;var j=C.set;var R=C.extend;var W=C.isObject;var E=C.isArray;var x=C.create;var A=C.isFunction;var T=function(e){o(a,e);a.functionalWrapper=function t(e){return function(t){o(n,t);function n(){r(this,n);return i(this,t.apply(this,arguments))}n.prototype.template=function t(r){return e(r.props,true)};return n}(a)};function a(){r(this,a);for(var t=arguments.length,n=Array(t),o=0;o<t;o++){n[o]=arguments[o]}var p=n.length===2;var s=i(this,e.call.apply(e,[this].concat(n)));if(p){s.$$innerInstance=undefined;s.props=n[0];s.$$wrapDom=null;s.$$props=R({},s.props)}return s}a.prototype.componentDidMount=function t(){var e=this.$$wrapDom.parentElement;this.$$innerInstance=new this.constructor(k(this.$$props));e.replaceChild(this.$$innerInstance.init(),this.$$wrapDom);this.$$innerInstance.mount()};a.prototype.componentWillUnmount=function t(){this.$$innerInstance&&this.$$innerInstance.destroy()};a.prototype.componentDidUpdate=function t(e,r,n){this.$$innerInstance&&this.$$innerInstance.set(k(this.$$props))};a.prototype.render=function e(){var r=this;this.$$props=R(this.$$props,this.props);return t.createElement("i",R({},{ref:function t(e){r.$$wrapDom=e}}),"")};n(a,[{key:"$$cid",get:function t(){return"IntactReact"}},{key:"isMounted",get:function t(){return this.mounted}},{key:"isReactComponent",get:function t(){return{}}}]);return a}(e);return T});